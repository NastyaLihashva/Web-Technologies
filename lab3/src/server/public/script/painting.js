"use strict";$(document).ready(function(){$.get("".concat(window.location.href,"/actual"),function(t){!function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};$(".title").text(t.name||"Новая картина"),$(".form").html('\n            <div class="form__about">\n                <label class="label">Название картины<input class="input" id="form__name" value="'.concat(t.name||"",'" name="name" type="text" required></label>\n                <label class="label">Автор<input class="input" id="form__author" value="').concat(t.author||"",'" name="author" type="text" required></label>\n                <label class="label">Описание<textarea class="input textarea" id="form__discription" name="discription" cols="30" rows="10" required>').concat(t.discription||"",'</textarea></label>\n                <label class="label">Ссылка на картинку<input class="input" id="form__url" value="').concat(t.url||"",'" name="url" required></label>\n            </div>\n            <div class="form__auction">\n                <label class="label">Участие в аукционе<input class="input" id="form__isInAuction" type="checkbox" ').concat(t.isInAuction?"checked":"",' name="isInAuction"></label>\n                <label class="label">Начальная цена<input class="input" id="form__startPric" value=').concat(t.startPrice||0,' name="startPrice" type="number" required></label>\n                <label class="label">Минимальное количество шагов<input class="input" id="form__minStep" value=').concat(t.minStep||1,' name="minStep" type="number" required></label>\n                <label class="label">Максимальное количество шагов<input class="input" id="form__maxStep" value="').concat(t.maxStep||1,'" name="maxStep" type="number" required></label>\n            </div>\n        ')),$(".main__img").html('\n            <img src="'.concat(t.url||"/public/img/paintings/undef.jpg",'" alt="').concat(t.name||"",'">\n        '))}(t),$.isEmptyObject(t)?($("#painting__form").attr("data-type","POST"),$(".btn__accept").text("Добавить картину")):$("#painting__form").attr("data-type","PUT")}),$("#painting__form").submit(function(t){t.preventDefault();var a=Object.fromEntries(new FormData(t.target));"on"===a.isInAuction?a.isInAuction=!0:a.isInAuction=!1,$.ajax({type:$(t.target).attr("data-type"),url:window.location.href,data:JSON.stringify(a),dataType:"json",contentType:"application/json"}).done(function(t){alert("Данные успешно обновлены"),$(".title").text($("#form__name").val()),$(".main__img").html('\n                    <img src="'.concat(a.url,'" alt="').concat(a.name,'">\n                ')),$("#painting__form").attr("data-type","PUT"),$(".btn__accept").text("Сохранить изменения")}).fail(function(t){console.log(t),alert("Ошибка")})}),$("#btn__delete").on("click",function(t){t.preventDefault(),$.ajax({type:"DELETE",url:window.location.href}).done(function(t){window.location.href="/"}).fail(function(t){alert("Ошибка")})}),$("#upload__form").submit(function(t){t.preventDefault();t=new FormData(t.target);$.ajax({type:"POST",url:"/upload",data:t,contentType:!1,processData:!1,success:function(){$("#file").prop("files")&&($(".main__img").html('\n                            <img src="/public/img/paintings/'.concat($("#file").prop("files")[0].name,'" alt="">\n                        ')),$("#form__url").val("/public/img/paintings/".concat($("#file").prop("files")[0].name)))}})})});